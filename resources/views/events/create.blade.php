@extends('layouts.dashboard') @section('title', 'Create Event') @section('page-title', 'Create Event') @section('page-subtitle', 'Schedule a new event for NIMR staff') @section('content') <div class="max-w-4xl mx-auto sm:px-6 lg:px-8"> <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"> <div class="p-6"> <form method="POST" action="{{ route('events.store') }}" class="space-y-6"> @csrf <!-- Basic Information --> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> <!-- Event Title --> <div class="md:col-span-2"> <label for="title" class="block text-sm font-medium text-gray-700 mb-2"> Event Title * </label> <input type="text" id="title" name="title" value="{{ old('title') }}" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder="Enter event title"> @error('title') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- Category --> <div> <label for="category" class="block text-sm font-medium text-gray-700 mb-2"> Category * </label> <select id="category" name="category" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 <option value="">Select category</option> @foreach ($categories as $key => $label) <option value="{{ $key }}" {{ old('category') === $key ? 'selected' : '' }}> {{ $label }} </option> @endforeach </select> @error('category') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- Priority --> <div> <label for="priority" class="block text-sm font-medium text-gray-700 mb-2"> Priority * </label> <select id="priority" name="priority" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 @foreach ($priorities as $key => $label) <option value="{{ $key }}" {{ old('priority', 'medium') === $key ? 'selected' : '' }}> {{ $label }} </option> @endforeach </select> @error('priority') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> </div> <!-- Description --> <div> <label for="description" class="block text-sm font-medium text-gray-700 mb-2"> Description </label> <textarea id="description" name="description" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder="Provide details about the event">{{ old('description') }}</textarea> @error('description') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- Date & Time --> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> <!-- Start Date & Time --> <div> <label for="start_datetime" class="block text-sm font-medium text-gray-700 mb-2"> Start Date & Time * </label> <input type="datetime-local" id="start_datetime" name="start_datetime" value="{{ old('start_datetime') }}" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 @error('start_datetime') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- End Date & Time --> <div> <label for="end_datetime" class="block text-sm font-medium text-gray-700 mb-2"> End Date & Time * </label> <input type="datetime-local" id="end_datetime" name="end_datetime" value="{{ old('end_datetime') }}" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 @error('end_datetime') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> </div> <!-- All Day Event --> <div class="flex items-center"> <input type="checkbox" id="all_day" name="all_day" value="1" {{ old('all_day') ? 'checked' : '' }} class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"> <label for="all_day" class="ml-2 block text-sm text-gray-700 All day event </label> </div> <!-- Location & Venue --> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> <!-- Location --> <div> <label for="location" class="block text-sm font-medium text-gray-700 mb-2"> Location </label> <input type="text" id="location" name="location" value="{{ old('location') }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder="e.g., NIMR Headquarters"> @error('location') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- Venue --> <div> <label for="venue" class="block text-sm font-medium text-gray-700 mb-2"> Venue </label> <input type="text" id="venue" name="venue" value="{{ old('venue') }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder="e.g., Conference Hall A"> @error('venue') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> </div> <!-- Venue Details --> <div> <label for="venue_details" class="block text-sm font-medium text-gray-700 mb-2"> Venue Details </label> <textarea id="venue_details" name="venue_details" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder="Additional venue information, directions, equipment available, etc.">{{ old('venue_details') }}</textarea> @error('venue_details') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- RSVP Settings --> <div class="border-t border-gray-200 pt-6"> <h3 class="text-lg font-medium text-gray-900 mb-4">RSVP Settings</h3> <!-- Requires RSVP --> <div class="flex items-center mb-4"> <input type="checkbox" id="requires_rsvp" name="requires_rsvp" value="1" {{ old('requires_rsvp') ? 'checked' : '' }} class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" onchange="toggleRsvpFields()"> <label for="requires_rsvp" class="ml-2 block text-sm text-gray-700 Require RSVP for this event </label> </div> <div id="rsvp-fields" class="grid grid-cols-1 md:grid-cols-2 gap-6" style="display: none;"> <!-- Max Attendees --> <div> <label for="max_attendees" class="block text-sm font-medium text-gray-700 mb-2"> Maximum Attendees </label> <input type="number" id="max_attendees" name="max_attendees" value="{{ old('max_attendees') }}" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 placeholder="Leave empty for unlimited"> @error('max_attendees') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- RSVP Deadline --> <div> <label for="rsvp_deadline" class="block text-sm font-medium text-gray-700 mb-2"> RSVP Deadline </label> <input type="datetime-local" id="rsvp_deadline" name="rsvp_deadline" value="{{ old('rsvp_deadline') }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 @error('rsvp_deadline') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> </div> </div> <!-- Visibility Settings --> <div class="border-t border-gray-200 pt-6"> <h3 class="text-lg font-medium text-gray-900 mb-4">Event Visibility</h3> <div> <label for="visibility_scope" class="block text-sm font-medium text-gray-700 mb-2"> Who can see this event? * </label> <select id="visibility_scope" name="visibility_scope" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 onchange="toggleTargetingFields()"> @foreach ($visibilityScopes as $key => $label) <option value="{{ $key }}" {{ old('visibility_scope', 'all') === $key ? 'selected' : '' }}> {{ $label }} </option> @endforeach </select> @error('visibility_scope') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- Specific Targeting --> <div id="targeting-fields" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6" style="display: none;"> <!-- Target Centres --> <div> <label for="target_centres" class="block text-sm font-medium text-gray-700 mb-2"> Target Centres </label> <select id="target_centres" name="target_centres[]" multiple class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 @foreach ($centres as $centre) <option value="{{ $centre->id }}" {{ in_array($centre->id, old('target_centres', [])) ? 'selected' : '' }}> {{ $centre->name }} </option> @endforeach </select> <p class="mt-1 text-xs text-gray-500 Ctrl/Cmd to select multiple </p> </div> <!-- Target Stations --> <div> <label for="target_stations" class="block text-sm font-medium text-gray-700 mb-2"> Target Stations </label> <select id="target_stations" name="target_stations[]" multiple class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 @foreach ($stations as $station) <option value="{{ $station->id }}" {{ in_array($station->id, old('target_stations', [])) ? 'selected' : '' }}> {{ $station->name }} </option> @endforeach </select> <p class="mt-1 text-xs text-gray-500 Ctrl/Cmd to select multiple </p> </div> </div> </div> <!-- Status --> <div class="border-t border-gray-200 pt-6"> <label for="status" class="block text-sm font-medium text-gray-700 mb-2"> Publication Status * </label> <select id="status" name="status" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 <option value="draft" {{ old('status', 'draft') === 'draft' ? 'selected' : '' }}> Save as Draft </option> <option value="published" {{ old('status') === 'published' ? 'selected' : '' }}> Publish Now </option> </select> @error('status') <p class="mt-1 text-sm text-red-600 $message }}</p> @enderror </div> <!-- Form Actions --> <div class="flex items-center justify-between pt-6 border-t border-gray-200 <a href="{{ route('events.index') }}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200"> Cancel </a> <button type="submit" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors duration-200"> Create Event </button> </div> </form> </div> </div> </div> <script> function toggleRsvpFields() { const checkbox = document.getElementById('requires_rsvp'); const fields = document.getElementById('rsvp-fields'); fields.style.display = checkbox.checked ? 'grid' : 'none'; } function toggleTargetingFields() { const select = document.getElementById('visibility_scope'); const fields = document.getElementById('targeting-fields'); fields.style.display = select.value === 'specific' ? 'grid' : 'none'; } // Initialize form state document.addEventListener('DOMContentLoaded', function() { toggleRsvpFields(); toggleTargetingFields(); }); </script> @endsection 
