@extends('layouts.dashboard') @section('title', $event->title) @section('page-title', $event->title) @section('page-subtitle', ucfirst($event->category) . ' â€¢ ' . $event->start_datetime->format('M j, Y')) @section('content') <div class="max-w-7xl mx-auto p-6"> <x-breadcrumbs :items="[[ 'label' => 'Dashboard', 'href' => route('dashboard') ], [ 'label' => 'Events', 'href' => route('events.index') ], [ 'label' => Str::limit($event->title, 50) ]]" /> </div> <div class="max-w-4xl mx-auto sm:px-6 lg:px-8"> <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"> <div class="p-6"> <!-- Event Header --> <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between mb-6"> <div class="flex-1"> <!-- Event Meta --> <div class="flex flex-wrap items-center gap-3 mb-4"> <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium {{ $event->category_color }}"> {{ ucfirst($event->category) }} </span> @if ($event->priority !== 'medium') <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium {{ $event->priority_color }}"> {{ ucfirst($event->priority) }} </span> @endif <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium {{ $event->status === 'published' ? 'bg-green-100 text-green-800 : 'bg-yellow-100 text-yellow-800 }}"> {{ ucfirst($event->status) }} </span> </div> </div> <!-- Action Buttons --> <div class="flex flex-col sm:flex-row gap-2 mt-4 lg:mt-0"> @if ($event->created_by === auth()->id() || auth()->user()->role !== 'staff') <a href="{{ route('events.edit', $event) }}" class="inline-flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-lg transition-colors duration-200"> <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"> </path> </svg> Edit Event </a> @endif <a href="{{ route('events.index') }}" class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors duration-200"> <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"> </path> </svg> Back to Events </a> </div> </div> <!-- Event Details Grid --> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"> <!-- Main Content --> <div class="lg:col-span-2 space-y-6"> <!-- Description --> @if ($event->description) <div> <h3 class="text-lg font-semibold text-gray-900 mb-3">Description</h3> <div class="prose max-w-none"> <p class="text-gray-600 leading-relaxed"> {{ $event->description }} </p> </div> </div> @endif <!-- Venue Details --> @if ($event->venue_details) <div> <h3 class="text-lg font-semibold text-gray-900 mb-3">Venue Information </h3> <p class="text-gray-600 leading-relaxed"> {{ $event->venue_details }} </p> </div> @endif <!-- Attendees List (if RSVP enabled and user has permission) --> @if ($event->requires_rsvp && ($event->created_by === auth()->id() || auth()->user()->role !== 'staff')) <div> <h3 class="text-lg font-semibold text-gray-900 mb-3"> Attendees ({{ $event->attendees_count }}) </h3> <div class="bg-gray-50 rounded-lg p-4"> @forelse($event->rsvps->where('status', 'attending') as $rsvp) <div class="flex items-center justify-between py-2 {{ !$loop->last ? 'border-b border-gray-200 : '' }}"> <div class="flex items-center space-x-3"> <div class="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center text-sm font-medium"> {{ substr($rsvp->user->name, 0, 1) }} </div> <div> <p class="text-sm font-medium text-gray-900 {{ $rsvp->user->name }} </p> @if ($rsvp->guest_count > 0) <p class="text-xs text-gray-500 +{{ $rsvp->guest_count }} guest{{ $rsvp->guest_count > 1 ? 's' : '' }} </p> @endif </div> </div> @if ($rsvp->response_notes) <span class="text-xs text-gray-500 title="{{ $rsvp->response_notes }}"> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"> </path> </svg> </span> @endif </div> @empty <p class="text-gray-500 text-sm text-center py-4"> No confirmed attendees yet. </p> @endforelse </div> </div> @endif </div> <!-- Sidebar --> <div class="space-y-6"> <!-- Event Details Card --> <div class="bg-gray-50 rounded-lg p-4"> <h3 class="text-lg font-semibold text-gray-900 mb-4">Event Details</h3> <!-- Date & Time --> <div class="flex items-start space-x-3 mb-4"> <svg class="w-5 h-5 text-gray-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"> </path> </svg> <div class="flex-1"> <p class="text-sm font-medium text-gray-900 {{ $event->start_datetime->format('l, F j, Y') }} </p> @if ($event->all_day) <p class="text-sm text-gray-500 day</p> @else <p class="text-sm text-gray-500 {{ $event->start_datetime->format('g:i A') }} - {{ $event->end_datetime->format('g:i A') }} <span class="ml-1">({{ $event->duration }})</span> </p> @endif </div> </div> <!-- Location --> @if ($event->location || $event->venue) <div class="flex items-start space-x-3 mb-4"> <svg class="w-5 h-5 text-gray-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"> </path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path> </svg> <div class="flex-1"> @if ($event->location) <p class="text-sm font-medium text-gray-900 {{ $event->location }}</p> @endif @if ($event->venue) <p class="text-sm text-gray-500 $event->venue }}</p> @endif </div> </div> @endif <!-- Organizer --> <div class="flex items-start space-x-3 mb-4"> <svg class="w-5 h-5 text-gray-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path> </svg> <div class="flex-1"> <p class="text-sm font-medium text-gray-900 by</p> <p class="text-sm text-gray-500 $event->creator->name }}</p> </div> </div> <!-- RSVP Info --> @if ($event->requires_rsvp) <div class="flex items-start space-x-3"> <svg class="w-5 h-5 text-gray-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"> </path> </svg> <div class="flex-1"> <p class="text-sm font-medium text-gray-900 {{ $event->attendees_count }} attending @if ($event->max_attendees) / {{ $event->max_attendees }} @endif </p> @if ($event->rsvp_deadline) <p class="text-sm text-gray-500 RSVP by {{ $event->rsvp_deadline->format('M j, g:i A') }} </p> @endif </div> </div> @endif </div> <!-- RSVP Section --> @if ($event->requires_rsvp) <div class="bg-white border border-gray-200 rounded-lg p-4"> <h3 class="text-lg font-semibold text-gray-900 mb-4">RSVP</h3> @if ($userRsvp) <!-- Current RSVP Status --> <div class="mb-4"> <div class="flex items-center space-x-2 mb-2"> <span class="text-sm text-gray-600 response:</span> <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {{ $userRsvp->status_color }}"> {{ ucfirst($userRsvp->status) }} </span> </div> @if ($userRsvp->response_notes) <p class="text-sm text-gray-600 italic"> "{{ $userRsvp->response_notes }}" </p> @endif </div> <!-- Update RSVP --> @if ($event->can_rsvp) <details class="group"> <summary class="cursor-pointer text-sm text-indigo-600 hover:text-indigo-800 Update your RSVP </summary> <div class="mt-3"> @include('events.partials.rsvp-form', [ 'event' => $event, 'userRsvp' => $userRsvp, ]) </div> </details> @else <p class="text-sm text-gray-500 RSVP deadline has passed or event is full. </p> @endif @else <!-- New RSVP --> @if ($event->can_rsvp) @include('events.partials.rsvp-form', [ 'event' => $event, 'userRsvp' => null, ]) @else <p class="text-sm text-gray-500 @if ($event->is_full) This event is full. @elseif($event->rsvp_deadline && now()->isAfter($event->rsvp_deadline)) RSVP deadline has passed. @else RSVP is not available for this event. @endif </p> @endif @endif </div> @endif </div> </div> </div> </div> </div> @endsection
