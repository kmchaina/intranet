@extends('layouts.dashboard') @section('title', 'Add Training Video') @section('content') <div class="max-w-4xl mx-auto"> <div class="bg-white shadow rounded-lg"> <div class="px-6 py-4 border-b border-gray-200"> <div class="flex items-center justify-between"> <div class="flex items-center space-x-4"> <a href="{{ route('training-videos.index') }}" class="text-gray-500 hover:text-gray-700 transition-colors"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" /> </svg> </a> <div> <h1 class="text-3xl font-semibold text-gray-900">Add Training Video</h1> <p class="text-lg text-gray-600 mt-1">Share knowledge with your team</p> </div> </div> </div> </div> <!-- Success/Error Messages --> @if (session('success')) <div class="mx-6 mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"> <strong class="font-bold">Success!</strong> <span class="block sm:inline">{{ session('success') }}</span> </div> @endif @if ($errors->any()) <div class="mx-6 mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"> <strong class="font-bold">Please fix the following errors:</strong> <ul class="mt-2 list-disc list-inside"> @foreach ($errors->all() as $error) <li>{{ $error }}</li> @endforeach </ul> </div> @endif <form action="{{ route('training-videos.store') }}" method="POST" class="p-6"> @csrf <!-- Video URL and Type Detection --> <div class="mb-6"> <label for="video_url" class="block text-sm font-medium text-gray-700 mb-2"> Video URL <span class="text-red-500">*</span> </label> <input type="url" id="video_url" name="video_url" value="{{ old('video_url') }}" required placeholder="https://www.youtube.com/watch?v=... or https://vimeo.com/... or file path" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('video_url') border-red-500 @enderror"> @error('video_url') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror <p class="mt-1 text-sm text-gray-500"> Supports YouTube, Vimeo, or local video files. The video type will be automatically detected. </p> </div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"> <!-- Left Column --> <div class="space-y-6"> <!-- Title --> <div> <label for="title" class="block text-sm font-medium text-gray-700 mb-2"> Title <span class="text-red-500">*</span> </label> <input type="text" id="title" name="title" value="{{ old('title') }}" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('title') border-red-500 @enderror"> @error('title') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror </div> <!-- Description --> <div> <label for="description" class="block text-sm font-medium text-gray-700 mb-2"> Description </label> <textarea id="description" name="description" rows="4" placeholder="Describe what viewers will learn from this video..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('description') border-red-500 @enderror">{{ old('description') }}</textarea> @error('description') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror </div> <!-- Category --> <div> <label for="category" class="block text-sm font-medium text-gray-700 mb-2"> Category <span class="text-red-500">*</span> </label> <select id="category" name="category" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('category') border-red-500 @enderror"> <option value="">Select a category</option> @foreach ($categories as $key => $label) <option value="{{ $key }}" {{ old('category') === $key ? 'selected' : '' }}> {{ $label }} </option> @endforeach </select> @error('category') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror </div> <!-- Target Audience --> <div> <label for="target_audience" class="block text-sm font-medium text-gray-700 mb-2"> Target Audience </label> <select id="target_audience" name="target_audience" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('target_audience') border-red-500 @enderror"> <option value="">Select target audience</option> @foreach ($targetAudiences as $key => $label) <option value="{{ $key }}" {{ old('target_audience') === $key ? 'selected' : '' }}> {{ $label }} </option> @endforeach </select> @error('target_audience') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror </div> </div> <!-- Right Column --> <div class="space-y-6"> <!-- Duration --> <div> <label for="duration_minutes" class="block text-sm font-medium text-gray-700 mb-2"> Duration (minutes) </label> <input type="number" id="duration_minutes" name="duration_minutes" value="{{ old('duration_minutes') }}" min="1" placeholder="e.g., 15" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('duration_minutes') border-red-500 @enderror"> @error('duration_minutes') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror <p class="mt-1 text-sm text-gray-500"> Optional: Helps users know the time commitment </p> </div> <!-- Tags --> <div> <label for="tags" class="block text-sm font-medium text-gray-700 mb-2"> Tags </label> <input type="text" id="tags" name="tags" value="{{ old('tags') }}" placeholder="excel, pivot tables, data analysis" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 @error('tags') border-red-500 @enderror"> @error('tags') <p class="mt-1 text-sm text-red-600">{{ $message }}</p> @enderror <p class="mt-1 text-sm text-gray-500"> Separate multiple tags with commas </p> </div> <!-- Options --> <div class="space-y-4"> <div class="flex items-center"> <input type="checkbox" id="is_featured" name="is_featured" value="1" {{ old('is_featured') ? 'checked' : '' }} class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"> <label for="is_featured" class="ml-2 block text-sm text-gray-700"> Feature this video </label> </div> <p class="text-sm text-gray-500 ml-6"> Featured videos appear prominently and are recommended to new users </p> </div> <!-- Video Preview --> <div id="videoPreview" class="hidden"> <label class="block text-sm font-medium text-gray-700 mb-2">Preview</label> <div class="border border-gray-300 rounded-lg overflow-hidden"> <div id="previewContainer" class="aspect-video bg-gray-100 flex items-center justify-center"> <p class="text-gray-500">Video preview will appear here</p> </div> </div> </div> </div> </div> <!-- Submit Buttons --> <div class="flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-gray-200"> <a href="{{ route('training-videos.index') }}" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors"> Cancel </a> <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center"> <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /> </svg> Add Video </button> </div> </form> </div> </div> <script> document.getElementById('video_url').addEventListener('blur', function() { const url = this.value.trim(); const previewContainer = document.getElementById('previewContainer'); const videoPreview = document.getElementById('videoPreview'); if (!url) { videoPreview.classList.add('hidden'); return; } // Auto-detect video type and show preview if (url.includes('youtube.com') || url.includes('youtu.be')) { showYouTubePreview(url); } else if (url.includes('vimeo.com')) { showVimeoPreview(url); } else if (url.match(/\.(mp4|webm|ogg)$/i)) { showVideoFilePreview(url); } else { previewContainer.innerHTML = '<p class="text-gray-500">Video type not recognized</p>'; videoPreview.classList.remove('hidden'); } }); function showYouTubePreview(url) { const videoId = extractYouTubeId(url); if (videoId) { const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`; document.getElementById('previewContainer').innerHTML = `<img src="${thumbnailUrl}" alt="YouTube Preview" class="w-full h-full object-cover">`; document.getElementById('videoPreview').classList.remove('hidden'); // Try to fetch video title fetchYouTubeTitle(videoId); } } function showVimeoPreview(url) { const videoId = extractVimeoId(url); if (videoId) { // Vimeo API requires more complex handling, show generic preview document.getElementById('previewContainer').innerHTML = `<div class="w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"> <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 24 24"> <path d="M8 5v14l11-7z"/> </svg> </div>`; document.getElementById('videoPreview').classList.remove('hidden'); } } function showVideoFilePreview(url) { document.getElementById('previewContainer').innerHTML = `<video controls class="w-full h-full"> <source src="${url}" type="video/mp4"> Your browser does not support the video tag. </video>`; document.getElementById('videoPreview').classList.remove('hidden'); } function extractYouTubeId(url) { const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/; const match = url.match(regExp); return (match && match[7].length === 11) ? match[7] : null; } function extractVimeoId(url) { const regExp = /(?:vimeo)\.com.*(?:videos|video|channels|)\/([\d]+)/i; const match = url.match(regExp); return match ? match[1] : null; } function fetchYouTubeTitle(videoId) { // This would require YouTube API key, so we'll skip auto-title for now // You can implement this if you have a YouTube API key } // Auto-fill title based on URL if title is empty document.getElementById('video_url').addEventListener('change', function() { const titleField = document.getElementById('title'); if (!titleField.value.trim()) { const url = this.value.trim(); if (url.includes('youtube.com') || url.includes('youtu.be')) { titleField.placeholder = 'YouTube video title will be detected...'; } else if (url.includes('vimeo.com')) { titleField.placeholder = 'Vimeo video title will be detected...'; } } }); </script> @endsection 
