@extends('layouts.dashboard') @section('title', 'Feedback Details') @section('content') <div class="min-h-screen bg-gray-50"> <div class="max-w-4xl mx-auto p-6"> <!-- Header --> <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6"> <div class="p-6 border-b border-gray-200"> <div class="flex items-center justify-between"> <div class="flex items-center space-x-4"> <a href="{{ route('feedback.index') }}" class="text-gray-500 hover:text-gray-700 transition-colors"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path> </svg> </a> <div> <h1 class="text-2xl font-bold text-gray-900">Feedback Details</h1> <p class="text-gray-600 mt-1">Review and manage feedback submission</p> </div> </div> @if(auth()->user()->isAdmin() || $feedback->submitted_by === auth()->id()) <a href="{{ route('feedback.edit', $feedback) }}" class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors"> <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path> </svg> Edit </a> @endif </div> </div> </div> <!-- Feedback Content --> <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6"> <div class="p-6"> <!-- Title and Status --> <div class="flex items-start justify-between mb-6"> <div class="flex items-center space-x-3"> <span class="text-3xl">{{ $feedback->type_icon }}</span> <div> <h2 class="text-xl font-semibold text-gray-900">{{ $feedback->subject }}</h2> <div class="flex items-center space-x-2 mt-2"> <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium {{ $feedback->status_color }}"> {{ $statuses[$feedback->status] ?? ucfirst($feedback->status) }} </span> <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium {{ $feedback->priority_color }}"> {{ $priorities[$feedback->priority] ?? ucfirst($feedback->priority) }} </span> <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800"> {{ $types[$feedback->type] ?? ucfirst($feedback->type) }} </span> @if($feedback->category) <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"> {{ $categories[$feedback->category] ?? ucfirst($feedback->category) }} </span> @endif </div> </div> </div> </div> <!-- Message --> <div class="mb-6"> <h3 class="text-lg font-medium text-gray-900 mb-3">Message</h3> <div class="bg-gray-50 rounded-lg p-4"> <p class="text-gray-700 whitespace-pre-wrap">{{ $feedback->message }}</p> </div> </div> <!-- Metadata --> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"> <div> <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-2">Submission Details</h4> <div class="space-y-2"> <div class="flex justify-between"> <span class="text-gray-600">Submitted by:</span> <span class="font-medium"> @if($feedback->is_anonymous && !auth()->user()->isAdmin()) Anonymous @else {{ $feedback->submitter ? $feedback->submitter->name : 'Unknown' }} @endif </span> </div> <div class="flex justify-between"> <span class="text-gray-600">Date:</span> <span class="font-medium">{{ $feedback->created_at->format('M j, Y \a\t g:i A') }}</span> </div> @if($feedback->assignee) <div class="flex justify-between"> <span class="text-gray-600">Assigned to:</span> <span class="font-medium">{{ $feedback->assignee->name }}</span> </div> @endif </div> </div> @if($feedback->resolved_at || $feedback->responded_at) <div> <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-2">Resolution Details</h4> <div class="space-y-2"> @if($feedback->responded_at) <div class="flex justify-between"> <span class="text-gray-600">Responded:</span> <span class="font-medium">{{ $feedback->responded_at->format('M j, Y \a\t g:i A') }}</span> </div> @endif @if($feedback->resolved_at) <div class="flex justify-between"> <span class="text-gray-600">Resolved:</span> <span class="font-medium">{{ $feedback->resolved_at->format('M j, Y \a\t g:i A') }}</span> </div> @endif </div> </div> @endif </div> <!-- Attachments --> @if($feedback->attachments && count($feedback->attachments) > 0) <div class="mb-6"> <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-3">Attachments</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"> @foreach($feedback->attachments as $attachment) <div class="flex items-center p-3 bg-gray-50 rounded-lg"> <svg class="w-8 h-8 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path> </svg> <div class="flex-1"> <p class="text-sm font-medium text-gray-900">{{ basename($attachment) }}</p> <a href="{{ asset('storage/' . $attachment) }}" target="_blank" class="text-xs text-blue-600 hover:text-blue-800">Download</a> </div> </div> @endforeach </div> </div> @endif <!-- Admin Response --> @if($feedback->admin_response) <div class="border-t pt-6"> <h4 class="text-lg font-medium text-gray-900 mb-3">Admin Response</h4> <div class="bg-blue-50 border border-blue-200 rounded-lg p-4"> <p class="text-blue-800 whitespace-pre-wrap">{{ $feedback->admin_response }}</p> </div> </div> @endif </div> </div> <!-- Admin Actions (Only for admins) --> @if(auth()->user()->isAdmin()) <div class="bg-white rounded-xl shadow-sm border border-gray-200"> <div class="p-6"> <h3 class="text-lg font-medium text-gray-900 mb-4">Admin Actions</h3> <form action="{{ route('feedback.update', $feedback) }}" method="POST" class="space-y-4"> @csrf @method('PUT') <div class="grid grid-cols-1 md:grid-cols-2 gap-4"> <div> <label for="status" class="block text-sm font-medium text-gray-700 mb-2">Status</label> <select name="status" id="status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"> @foreach(\App\Models\Feedback::getStatuses() as $key => $label) <option value="{{ $key }}" {{ $feedback->status === $key ? 'selected' : '' }}> {{ $label }} </option> @endforeach </select> </div> <div> <label for="assigned_to" class="block text-sm font-medium text-gray-700 mb-2">Assign To</label> <select name="assigned_to" id="assigned_to" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"> <option value="">Unassigned</option> @foreach(\App\Models\User::where('is_admin', true)->get() as $user) <option value="{{ $user->id }}" {{ $feedback->assigned_to === $user->id ? 'selected' : '' }}> {{ $user->name }} </option> @endforeach </select> </div> </div> <div> <label for="admin_response" class="block text-sm font-medium text-gray-700 mb-2">Admin Response</label> <textarea name="admin_response" id="admin_response" rows="4" placeholder="Provide a response to the user..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">{{ $feedback->admin_response }}</textarea> </div> <div class="flex justify-end"> <button type="submit" class="inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors"> <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path> </svg> Update Feedback </button> </div> </form> </div> </div> @endif </div> </div> @if(session('success')) <div class="fixed bottom-4 right-4 bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-lg shadow-lg z-50"> <div class="flex items-center"> <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path> </svg> {{ session('success') }} </div> </div> @endif @endsection 
